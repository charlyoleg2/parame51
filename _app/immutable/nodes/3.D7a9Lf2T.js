import{a as wa,b as Wa}from"../chunks/BMhB1rsN.js";import{H as Ya,a as Ca,g as Va}from"../chunks/xkAnoctE.js";import"../chunks/cF6w2Rh4.js";import"../chunks/DsnmJJEf.js";import{n as aa,aH as ba,m as Ke,N as Ea,aI as Pa,aq as Za,aJ as Ka,aK as Ga,aL as Ba,ab as Ha,z as Fa,O as Ma,aM as Ja,aN as Qa,V as y,v as r,au as $a,U as $e,aO as Fe,p as _e,ad as _a,f as Pe,a as C,b as pe,d as l,r as t,t as le,aP as b,c as M,s as a,ac as B,af as je,e as L,ag as De,y as pa,aQ as Mt,aR as $t,ae as xa,aS as ha,aT as el,aa as tl,aU as ka,aV as al}from"../chunks/BbJ2r-da.js";import{s as Z,e as ze,q as ga,t as ne,u as la,w as ll,x as sl,y as rl,z as nl,A as ya,P as ea,B as Da,C as Qe,D as ol,F as cl,G as il,H as vl,I as ta,J as da,K as dl,f as vt,L as ua,M as La,r as ul,N as ie,O as fl,Q as Sa,R as ml,S as hl,T as gl,U as bl}from"../chunks/BVFf4F1r.js";import{p as Se,i as Ut,b as sa}from"../chunks/CWMC26UC.js";import{s as _l}from"../chunks/CQGWfUKG.js";import{p as Na}from"../chunks/DgilwGuF.js";import{i as pl}from"../chunks/wCH1lj-T.js";function Ta(s){var e,o,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var v=s.length;for(e=0;e<v;e++)s[e]&&(o=Ta(s[e]))&&(n&&(n+=" "),n+=o)}else for(o in s)s[o]&&(n&&(n+=" "),n+=o);return n}function yl(){for(var s,e,o=0,n="",v=arguments.length;o<v;o++)(s=arguments[o])&&(e=Ta(s))&&(n&&(n+=" "),n+=e);return n}function za(s){return typeof s=="object"?yl(s):s??""}const qa=[...` 	
\r\fÂ \v\uFEFF`];function jl(s,e,o){var n=s==null?"":""+s;if(e&&(n=n?n+" "+e:e),o){for(var v of Object.keys(o))if(o[v])n=n?n+" "+v:v;else if(n.length)for(var c=v.length,d=0;(d=n.indexOf(v,d))>=0;){var i=d+c;(d===0||qa.includes(n[d-1]))&&(i===n.length||qa.includes(n[i]))?n=(d===0?"":n.substring(0,d))+n.substring(i+1):d=i}}return n===""?null:n}function we(s,e,o,n,v,c){var d=s.__className;if(aa||d!==o||d===void 0){var i=jl(o,n,c);(!aa||i!==s.getAttribute("class"))&&(i==null?s.removeAttribute("class"):s.className=i),s.__className=o}else if(c&&v!==c)for(var u in c){var j=!!c[u];(v==null||j!==!!v[u])&&s.classList.toggle(u,j)}return c}function Ra(s,e,o=!1){if(s.multiple){if(e==null)return;if(!Za(e))return Ka();for(var n of s.options)n.selected=e.includes(Rt(n));return}for(n of s.options){var v=Rt(n);if(Ga(v,e)){n.selected=!0;return}}(!o||e!==void 0)&&(s.selectedIndex=-1)}function wl(s){var e=new MutationObserver(()=>{Ra(s,s.__value)});e.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ba(()=>{e.disconnect()})}function Aa(s,e,o=e){var n=new WeakSet,v=!0;ba(s,"change",c=>{var d=c?"[selected]":":checked",i;if(s.multiple)i=[].map.call(s.querySelectorAll(d),Rt);else{var u=s.querySelector(d)??s.querySelector("option:not([disabled])");i=u&&Rt(u)}o(i),Ke!==null&&n.add(Ke)}),Ea(()=>{var c=e();if(s===document.activeElement){var d=Pa??Ke;if(n.has(d))return}if(Ra(s,c,v),v&&c===void 0){var i=s.querySelector(":checked");i!==null&&(c=Rt(i),o(c))}s.__value=c,v=!1}),wl(s)}function Rt(s){return"__value"in s?s.__value:s.value}function dt(s,e,o=e){var n=new WeakSet;ba(s,"input",async v=>{var c=v?s.defaultValue:s.value;if(c=fa(s)?ma(c):c,o(c),Ke!==null&&n.add(Ke),await Ha(),c!==(c=e())){var d=s.selectionStart,i=s.selectionEnd,u=s.value.length;if(s.value=c??"",i!==null){var j=s.value.length;d===i&&i===u&&j>u?(s.selectionStart=j,s.selectionEnd=j):(s.selectionStart=d,s.selectionEnd=Math.min(i,j))}}}),(aa&&s.defaultValue!==s.value||Fa(e)==null&&s.value)&&(o(fa(s)?ma(s.value):s.value),Ke!==null&&n.add(Ke)),Ma(()=>{var v=e();if(s===document.activeElement){var c=Pa??Ke;if(n.has(c))return}fa(s)&&v===ma(s.value)||s.type==="date"&&!v&&!s.value||v!==s.value&&(s.value=v??"")})}function Le(s,e,o=e){ba(s,"change",n=>{var v=n?s.defaultChecked:s.checked;o(v)}),(aa&&s.defaultChecked!==s.checked||Fa(e)==null)&&o(s.checked),Ma(()=>{var n=e();s.checked=!!n})}function fa(s){var e=s.type;return e==="number"||e==="range"}function ma(s){return s===""?null:+s}function xl(s,e){Ja(window,["resize"],()=>Qa(()=>e(window[s])))}function kl(s){var e=$a(0);return function(){return arguments.length===1?(y(e,r(e)+1),arguments[0]):(r(e),s())}}function Dl(s,e){throw new Ya(s,e)}function Ll({params:s}){const e=s.design;if(Object.keys(wa).includes(e))return{pageDef:wa[e],allLink:Wa};Dl(404,"Design undefined!")}const Fs=Object.freeze(Object.defineProperty({__proto__:null,load:Ll},Symbol.toStringTag,{value:"Module"})),J=$e({});function Ua(s,e,o){if(Object.keys(J).includes(s)){const v=J[s],c=Object.keys(v);for(const d of Object.keys(e))c.includes(d)?o&&(v[d]=e[d]):v[d]=e[d];J[s]=v}else J[s]=e}function Sl(s){const e=s.pDef.partName,o={};for(const n of s.pDef.params)o[n.name]=n.init;Ua(e,o,!1)}var Nl=M('<aside class="backdrop svelte-13nomgj"><div class="dialog svelte-13nomgj"><button class="svelte-13nomgj"><img/></button></div></aside>');function Ia(s,e){_e(e,!0);let o=Se(e,"modalOpen",15);function n(){o(!1)}var v=_a(),c=Pe(v);{var d=i=>{var u=Nl(),j=l(u),m=l(j),S=l(m);t(m),t(j),t(u),le(()=>{Z(S,"src",e.svgPath),Z(S,"alt",e.svgPath)}),b("click",m,n),C(i,u)};Ut(c,i=>{o()&&i(d)})}C(s,v),pe()}Fe(["click"]);var zl=M('<button class="svelte-x3mjj9"><img class="svelte-x3mjj9"/></button>'),ql=M('<section class="svelte-x3mjj9"><!> <!></section>');function Al(s,e){_e(e,!0);function o(m){const S=[];for(const q of Object.values(m.paramSvg))S.includes(q)||S.push(q);return S}let n=B(!1),v=B(""),c=je(()=>o(e.pDef).map(m=>ga(`/pgdsvg/${m}`)));function d(m){y(v,m,!0),y(n,!0)}var i=ql(),u=l(i);Ia(u,{get svgPath(){return r(v)},get modalOpen(){return r(n)},set modalOpen(m){y(n,m,!0)}});var j=a(u,2);ze(j,16,()=>r(c),m=>m,(m,S)=>{var q=zl(),x=l(q);t(q),le(()=>{Z(x,"src",S),Z(x,"alt",S)}),b("click",q,()=>d(S)),C(m,q)}),t(i),C(s,i),pe()}Fe(["click"]);var Ol=M('<aside class="backdrop svelte-w3oy1x"><div><article class="question svelte-w3oy1x"><!></article> <footer class="svelte-w3oy1x"><button class="cancel svelte-w3oy1x">Cancel</button> <button class="ok svelte-w3oy1x"> </button></footer></div></aside>');function Tt(s,e){_e(e,!0);let o=Se(e,"okName",3,"Ok"),n=Se(e,"modalOpen",15),v=Se(e,"sizeLarge",3,!1);function c(){n(!1)}function d(){e.okFunc(),n(!1)}var i=_a(),u=Pe(i);{var j=m=>{var S=Ol(),q=l(S);let x;var f=l(q),X=l(f);_l(X,()=>e.children),t(f);var T=a(f,2),K=l(T),A=a(K,2),ee=l(A,!0);t(A),t(T),t(q),t(S),le(()=>{x=we(q,1,"dialog svelte-w3oy1x",null,x,{sizeLarge:v()}),L(ee,o())}),b("click",K,c),b("click",A,d),C(m,S)};Ut(u,m=>{n()&&m(j)})}C(s,i),pe()}Fe(["click"]);var Cl=M('<p class="diagItem svelte-1bol80v"> </p>'),Pl=M('<p class="diagTitle svelte-1bol80v">Do you really want to delete the following localStorage keys?</p> <!>',1),Fl=M('<tr class="svelte-1bol80v"><td><input type="checkbox"/></td><td class="svelte-1bol80v"><button class="svelte-1bol80v"> </button></td><td> </td></tr>'),Ml=M('<div class="deleteKeys svelte-1bol80v"><button class="svelte-1bol80v">Delete</button> <!> <table class="svelte-1bol80v"><thead class="svelte-1bol80v"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-1bol80v"></tbody></table></div>');function Xa(s,e){_e(e,!0);let o=Se(e,"storeName",15),n=Se(e,"localKeys",15),v=B($e({})),c=B(!1),d=B(!1);function i(){let h=[];const I=new RegExp(`^${e.pageName}_`);return h=Object.keys(window.localStorage).filter(E=>I.test(E)).map(E=>E.replace(I,"")),h.sort(),h}n(i());function u(h){o(h)}function j(h){let I={};for(const G of h){let E="";const te=`${e.pageName}_${G}`,Q=window.localStorage.getItem(te);Q!==null&&(E=JSON.parse(Q).lastModif),I[G]=E}return I}let m=je(()=>j(n()));function S(h){let I={};for(const G of h)I[G]=!1;return I}y(v,S(n()),!0);function q(){for(const h of n())r(v)[h]=r(c)}function x(){for(const h of n())if(r(v)[h]){const I=`${e.pageName}_${h}`;window.localStorage.removeItem(I)}y(c,!1),n(i())}var f=Ml(),X=l(f),T=a(X,2);Tt(T,{okName:"Confirm",okFunc:x,get modalOpen(){return r(d)},set modalOpen(h){y(d,h,!0)},children:(h,I)=>{var G=Pl(),E=a(Pe(G),2);ze(E,16,n,te=>te,(te,Q)=>{var fe=_a(),re=Pe(fe);{var H=ge=>{var ce=Cl(),me=l(ce,!0);t(ce),le(()=>L(me,Q)),C(ge,ce)};Ut(re,ge=>{r(v)[Q]&&ge(H)})}C(te,fe)}),C(h,G)},$$slots:{default:!0}});var K=a(T,2),A=l(K),ee=a(l(A)),oe=l(ee),ve=l(oe);ne(ve),t(oe),De(2),t(ee),t(A);var de=a(A);ze(de,20,n,h=>h,(h,I)=>{var G=Fl(),E=l(G),te=l(E);ne(te),t(E);var Q=a(E),fe=l(Q),re=l(fe,!0);t(fe),t(Q);var H=a(Q),ge=l(H,!0);t(H),t(G),le(()=>{L(re,I),L(ge,r(m)[I])}),Le(te,()=>r(v)[I],ce=>r(v)[I]=ce),b("click",fe,()=>u(I)),C(h,G)}),t(de),t(K),t(f),b("click",X,()=>{y(d,!0)}),b("change",ve,q),Le(ve,()=>r(c),h=>y(c,h)),C(s,f),pe()}Fe(["click","change"]);var Tl=M('<p class="warnMsg svelte-cmr2ii"> </p>'),Rl=M('<!> <div class="svelte-cmr2ii"><label for="storName" class="svelte-cmr2ii">Give a name to your parameter-set:</label> <input type="text" id="storName" required="" minlength="4" maxlength="30" size="32" class="svelte-cmr2ii"/> <!></div>',1);function Ul(s,e){_e(e,!0);let o=Se(e,"storeName",15),n=B($e([]));function v(q){const x=/[-:]/g,f=/\..*$/,X=new Date().toISOString().replace(x,"").replace(f,"").replace("T","_");return`${q}_${X}`}o(v(e.pageName));let c=je(()=>r(n).includes(o()));var d=Rl(),i=Pe(d);Xa(i,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(q){o(q)},get localKeys(){return r(n)},set localKeys(q){y(n,q,!0)}});var u=a(i,2),j=a(l(u),2);ne(j);var m=a(j,2);{var S=q=>{var x=Tl(),f=l(x);t(x),le(()=>L(f,`Warning: name ${o()??""} already used`)),C(q,x)};Ut(m,q=>{r(c)&&q(S)})}t(u),dt(j,o),C(s,d),pe()}var Il=M('<!> <div class="svelte-imynj"><label for="storName" class="svelte-imynj">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-imynj"/></div>',1);function Xl(s,e){_e(e,!0);let o=Se(e,"storeName",15),n=B($e([]));function v(j){let m=o();return!j.includes(m)&&(j.length>0?m=j[0]:m=""),m}pa(()=>{o(v(r(n)))});var c=Il(),d=Pe(c);Xa(d,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(j){o(j)},get localKeys(){return r(n)},set localKeys(j){y(n,j,!0)}});var i=a(d,2),u=a(l(i),2);ne(u),t(i),le(()=>la(u,o())),C(s,c),pe()}const D=$e({dLayers:sl(),zAdjust:ll(),canvasZWidth:0});var Wl=M('<canvas class="mini svelte-ycwjvn"></canvas>');function Oa(s,e){_e(e,!0);const o=200,n=.6;let v;function c(u,j,m,S){const q=rl(S);q.ruler=!1;let x;if(v){const f=v.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const X=f.canvas.width;try{e.full?x=u.getAdjustFull(f.canvas.width,f.canvas.height):x=nl(m,X,j),u.draw(f,x,q)}catch(T){console.log(T)}}}pa(()=>{c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)});function d(u){const j=u.offsetX,m=u.offsetY,S=v.getContext("2d"),q=S.canvas.width/2,x=S.canvas.height/2;if(u.button===0){let f=1;j>q&&(f+=1*n),m>x&&(f+=2*n),S.canvas.width=f*o,S.canvas.height=f*o,c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)}}var i=Wl();Z(i,"width",o),Z(i,"height",o),sa(i,u=>v=u,()=>v),b("click",i,d),C(s,i),pe()}Fe(["click"]);function Yl(s,e){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",s),o.click(),o.remove()}function Vl(s,e,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_");return ya(c,s,e,o)}function ja(s,e,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_"),d=`px_${s}_${c}.json`,i=ya(c,s,e,o);Yl(d,i)}function El(s,e,o){const n=new URL(s),v=2e3;let c=n.toString().length;for(const d of Object.keys(e)){const i=e[d].toString(),u=2+d.length+i.length;n.searchParams.append(encodeURIComponent(d),encodeURIComponent(i)),c+=u}return c>=v&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${v}`),n.toString()}const Zl=Symbol();class Kl extends URLSearchParams{#e=B(0);#l=Bl();#t=!1;#a(){if(!this.#l||this.#t)return;this.#t=!0;const e=this.toString();this.#l.search=e&&`?${e}`,this.#t=!1}[Zl](e){if(!this.#t){this.#t=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of e)super.append(o,n);Mt(this.#e),this.#t=!1}}append(e,o){super.append(e,o),this.#a(),Mt(this.#e)}delete(e,o){var n=super.has(e,o);super.delete(e,o),n&&(this.#a(),Mt(this.#e))}get(e){return r(this.#e),super.get(e)}getAll(e){return r(this.#e),super.getAll(e)}has(e,o){return r(this.#e),super.has(e,o)}keys(){return r(this.#e),super.keys()}set(e,o){var n=super.getAll(e).join("");super.set(e,o),n!==super.getAll(e).join("")&&(this.#a(),Mt(this.#e))}sort(){super.sort(),this.#a(),Mt(this.#e)}toString(){return r(this.#e),super.toString()}values(){return r(this.#e),super.values()}entries(){return r(this.#e),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#e),super.size}}let Gl=null;function Bl(){return Gl}var Hl=M('<input type="number" class="input-number svelte-tge7ql"/> <input type="range" class="svelte-tge7ql"/>',1),Jl=M("<option> </option>"),Ql=M("<select></select>"),$l=M("<option> </option>"),es=M("<select></select>"),ts=M('<tr><td class="svelte-tge7ql"> </td><td class="svelte-tge7ql"><button class="svelte-tge7ql"> </button></td><td class="svelte-tge7ql"><!></td><td> </td><td> </td><td class="svelte-tge7ql"> </td><td class="svelte-tge7ql"> </td><td> </td></tr>'),as=M('<tbody class="svelte-tge7ql"><tr class="separator svelte-tge7ql"><td class="svelte-tge7ql"> </td><td class="svelte-tge7ql"> </td><td class="svelte-tge7ql"><label class="svelte-tge7ql"><input type="checkbox" class="svelte-tge7ql"/> <span class="svelte-tge7ql"></span></label></td></tr></tbody> <tbody></tbody>',1),ls=M('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-tge7ql"> </p>',1),ss=M('<section class="svelte-tge7ql"><h2 class="svelte-tge7ql">Parameters</h2> <main class="svelte-tge7ql"><label for="loadFParams" class="fileUpload svelte-tge7ql">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-tge7ql"/> <button class="svelte-tge7ql">Set Params Default</button> <button class="svelte-tge7ql">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-tge7ql"><thead class="svelte-tge7ql"><tr class="svelte-tge7ql"><td class="svelte-tge7ql">&#35;</td><td class="svelte-tge7ql">Parameter name</td><td class="svelte-tge7ql">Value<span class="svelte-tge7ql"><button class="svelte-tge7ql">&minus;</button><button class="svelte-tge7ql">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-tge7ql">Min</td><td class="svelte-tge7ql">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-tge7ql"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-tge7ql">Save Parameters to File</button> <button class="svelte-tge7ql">Save Parameters as URL</button> <button class="svelte-tge7ql">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-tge7ql"><img class="svelte-tge7ql"/></button> <div class="mini-canvas svelte-tge7ql"><!></div> <div class="mini-canvas svelte-tge7ql"><!></div></section>');function rs(s,e){_e(e,!0);let o=B(""),n=B(!1),v=B(""),c=B(!1),d=B(!1),i=B(!1),u=B(!1),j=B(!1),m=B(""),S=B(""),q=B("");const x=e.pDef;let f=B($e(re(x.params[0].name))),X=B(!1),T=B($e(me(ce(x.params))));Ca(()=>{y(f,re(e.pDef.params[0].name),!0),y(T,me(ce(e.pDef.params)),!0)});function K(_,p){let z="",F=!1;_!==e.pDef.partName&&(z+=`warn361: read partName: '${_}'  expected partName: '${e.pDef.partName}'
`,F=!0);let ae=0,he=0,Ne=0;const ot=[];for(const be of e.pDef.params)ot.push(be.name),Object.hasOwn(p,be.name)?(ae+=1,J[e.pDef.partName][be.name]===p[be.name]?Ne+=1:J[e.pDef.partName][be.name]=p[be.name]):he+=1;let ke=0;for(const be of Object.keys(p))ot.includes(be)||(ke+=1,z+=`warn363: parameter ${be} not in the scope of the design (${ke})
`);const wt=ke>0,Ve=new Date().toLocaleTimeString();return z+=`Params loaded at ${Ve} :`,z+=` def-nb: ${Object.keys(e.pDef.params).length}`,z+=`, cover-nb: ${ae}, uncover-nb: ${he}
`,z+=` load-nb: ${Object.keys(p).length}`,z+=`, equal-nb: ${Ne}, changed-nb: ${ae-Ne}`,z+=`, out-of-scope: ${ke}`,[z,F||wt]}async function A(_){try{const p=await fetch(_);if(!p.ok)throw`err627: error while fetching ${_}`;const z=await p.text(),[F]=Da(z);(ae=>{var he=$t(ae,2);y(v,he[0],!0),y(c,he[1],!0)})(K(F.partName,F.pVal)),y(o,F.comment,!0)}catch(p){let z=`err223: error by fetching px file
`;z+=p,y(v,z,!0),y(c,!0)}}async function ee(){{const _=new Kl(Na.url.search),p="pxUrl";if(_.has(p)){const F=_.get(p);_.delete(p),F?await A(F):(y(v,`err123: error by parsing URL-search-params
`),y(c,!0))}const z={};for(const[F,ae]of _){const he=Number(ae);isNaN(he)||(z[F]=he)}Object.keys(z).length>0&&(F=>{var ae=$t(F,2);y(v,ae[0],!0),y(c,ae[1],!0)})(K(e.pDef.partName,z))}}ee();function oe(_){try{const[p]=Da(_);(z=>{var F=$t(z,2);y(v,F[0],!0),y(c,F[1],!0)})(K(p.partName,p.pVal)),y(o,p.comment,!0)}catch(p){let z=`err723: error by parsing parameter file
`;z+=p,y(v,z,!0),y(c,!0)}}async function ve(_){const p=await _.text();oe(p)}function de(_){if(_.target){const p=_.target.files;p&&ve(p[0])}}function h(){ja(e.pDef.partName,J[e.pDef.partName],r(o))}function I(){const _={};for(const p of e.pDef.params)_[p.name]=p.init;(p=>{var z=$t(p,2);y(v,z[0],!0),y(c,z[1],!0)})(K(e.pDef.partName,_))}function G(){if(r(m)!==void 0&&r(m)!==""){const _=`${e.pDef.partName}_${r(m)}`;{const p=window.localStorage.getItem(_);p===null?(y(v,`Warn157: localStorage key ${_} is null`),y(c,!0)):oe(p)}}else y(v,"Warn239: No valid name for loading from localStorage!"),y(c,!0)}function E(){if(r(S)!==void 0&&r(S)!==""){const _=`${e.pDef.partName}_${r(S)}`,p=/\..*$/,z=new Date().toISOString().replace(p,""),F=ya(z,e.pDef.partName,J[e.pDef.partName],r(o));window.localStorage.setItem(_,F)}else console.log("Warn639: No valid name for writing to localStorage!")}function te(){return El(Na.url.href,J[e.pDef.partName]).toString()}function Q(){y(q,te(),!0),y(u,!0)}function fe(){}function re(_){let p=ga("/pgdsvg/default_param_blank.svg");return Object.keys(e.pDef.paramSvg).includes(_)&&(p=ga(`/pgdsvg/${e.pDef.paramSvg[_]}`)),p}function H(_){y(f,re(_),!0)}function ge(){y(X,!0)}function ce(_){const p=[];let F={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},ae=0;for(const he of _)he.pType===ea.eSectionSeparator?(p.push(F),ae+=1,F={sectionName:he.name,sectionID:`g${ae}${he.name}`,sectionVisCollapse:!0,params:[]}):F.params.push(he);return p.push(F),p}function me(_){const p={};for(const z of _)p[z.sectionID]=z.sectionVisCollapse;return p}let Me=je(()=>ce(e.pDef.params));function g(){y(n,!0)}function N(){y(n,!1)}let O=je(()=>r(n)?2:4),Y=je(()=>r(n)?2:3),qe=je(()=>r(n)?50:70);var xe=ss(),Te=a(l(xe),2),Ue=a(l(Te),2),Ie=a(Ue,2),Re=a(Ie,2),Ae=a(Re,2);Tt(Ae,{okName:"Overwrite Parameters",okFunc:I,get modalOpen(){return r(d)},set modalOpen(_){y(d,_,!0)},children:(_,p)=>{De();var z=xa("Load the default parameters ?");C(_,z)},$$slots:{default:!0}});var et=a(Ae,2);Tt(et,{okName:"Load Parameters",okFunc:G,get modalOpen(){return r(i)},set modalOpen(_){y(i,_,!0)},children:(_,p)=>{Xl(_,{get pageName(){return e.pDef.partName},get storeName(){return r(m)},set storeName(z){y(m,z,!0)}})},$$slots:{default:!0}});var We=a(et,2);ha(We);let It;var tt=a(We,2),ut=l(tt),ft=l(ut),Ge=a(l(ft),2),at=a(l(Ge)),Xt=l(at),mt=a(Xt);t(at),t(Ge);var Wt=a(Ge);let lt;var Yt=a(Wt);let ht;var ra=a(Yt,3);let gt;t(ft),t(ut);var bt=a(ut);ze(bt,19,()=>r(Me),_=>_.sectionName,(_,p,z)=>{var F=as(),ae=Pe(F),he=l(ae),Ne=l(he),ot=l(Ne,!0);t(Ne);var ke=a(Ne),wt=l(ke,!0);t(ke);var Ve=a(ke),xt=l(Ve),be=l(xt);ne(be),De(2),t(xt),t(Ve),t(he),t(ae);var He=a(ae,2);let Bt;ze(He,23,()=>r(p).params,Xe=>Xe.name,(Xe,V,kt)=>{var ct=ts();let Dt;var Lt=l(ct),St=l(Lt);t(Lt);var Je=a(Lt),Nt=l(Je),zt=l(Nt,!0);t(Nt),t(Je);var qt=a(Je),At=l(qt);{var na=k=>{var U=Hl(),$=Pe(U);ne($);var ue=a($,2);ne(ue),le(()=>{Z($,"min",r(V).min),Z($,"max",r(V).max),Z($,"step",r(V).step),Z(ue,"min",r(V).min),Z(ue,"max",r(V).max),Z(ue,"step",r(V).step)}),dt($,()=>J[e.pDef.partName][r(V).name],ye=>J[e.pDef.partName][r(V).name]=ye),dt(ue,()=>J[e.pDef.partName][r(V).name],ye=>J[e.pDef.partName][r(V).name]=ye),C(k,U)},Ht=k=>{var U=Ql();ze(U,22,()=>["Off","On"],$=>$,($,ue,ye)=>{var se=Jl(),Oe=l(se,!0);t(se);var Ce={};le(()=>{L(Oe,ue),Ce!==(Ce=r(ye))&&(se.value=(se.__value=r(ye))??"")}),C($,se)}),t(U),Aa(U,()=>J[e.pDef.partName][r(V).name],$=>J[e.pDef.partName][r(V).name]=$),C(k,U)},oa=k=>{var U=es();ze(U,22,()=>r(V).dropdown,$=>$,($,ue,ye)=>{var se=$l(),Oe=l(se,!0);t(se);var Ce={};le(()=>{L(Oe,ue),Ce!==(Ce=r(ye))&&(se.value=(se.__value=r(ye))??"")}),C($,se)}),t(U),Aa(U,()=>J[e.pDef.partName][r(V).name],$=>J[e.pDef.partName][r(V).name]=$),C(k,U)},Jt=k=>{var U=xa("unknown");C(k,U)};Ut(At,k=>{r(V).pType===ea.eNumber?k(na):r(V).pType===ea.eCheckbox?k(Ht,1):r(V).pType===ea.eDropdown?k(oa,2):k(Jt,!1)})}t(qt);var Ee=a(qt);let Qt;var Ot=l(Ee,!0);t(Ee);var it=a(Ee);let Ct;var ca=l(it,!0);t(it);var Ze=a(it),Pt=l(Ze,!0);t(Ze);var Ft=a(Ze),ia=l(Ft,!0);t(Ft);var w=a(Ft);let P;var R=l(w,!0);t(w),t(ct),le(()=>{Dt=we(ct,1,"svelte-tge7ql",null,Dt,{changed:J[e.pDef.partName][r(V).name]!==r(V).init}),L(St,`${r(z)+1}.${r(kt)+1}`),L(zt,r(V).name),Qt=we(Ee,1,"svelte-tge7ql",null,Qt,{hideColumn:r(n)}),L(Ot,r(V).unit),Ct=we(it,1,"svelte-tge7ql",null,Ct,{hideColumn:r(n)}),L(ca,r(V).init),L(Pt,r(V).min),L(ia,r(V).max),P=we(w,1,"svelte-tge7ql",null,P,{hideColumn:r(n)}),L(R,r(V).step)}),b("click",Nt,()=>H(r(V).name)),C(Xe,ct)}),t(He),le(()=>{L(ot,r(z)+1),Z(ke,"colspan",r(O)),L(wt,r(p).sectionName),Z(Ve,"colspan",r(Y)),Bt=we(He,1,"svelte-tge7ql",null,Bt,{collaps:r(T)[r(p).sectionID]})}),Le(be,()=>r(T)[r(p).sectionID],Xe=>r(T)[r(p).sectionID]=Xe),C(_,F)}),t(tt);var Be=a(tt,2),_t=a(l(Be),2);ne(_t),t(Be);var st=a(Be,2),Vt=a(st,2),rt=a(Vt,2),Et=a(rt,2);Tt(Et,{okName:"Done",okFunc:fe,sizeLarge:!0,get modalOpen(){return r(u)},set modalOpen(_){y(u,_,!0)},children:(_,p)=>{var z=ls(),F=a(Pe(z),2),ae=l(F,!0);t(F),le(()=>L(ae,r(q))),C(_,z)},$$slots:{default:!0}});var Zt=a(Et,2);Tt(Zt,{okName:"Save into localStorage",okFunc:E,get modalOpen(){return r(j)},set modalOpen(_){y(j,_,!0)},children:(_,p)=>{Ul(_,{get pageName(){return e.pDef.partName},get storeName(){return r(S)},set storeName(z){y(S,z,!0)}})},$$slots:{default:!0}}),t(Te);var Kt=a(Te,2);Ia(Kt,{get svgPath(){return r(f)},get modalOpen(){return r(X)},set modalOpen(_){y(X,_,!0)}});var Ye=a(Kt,2),nt=l(Ye);t(Ye);var pt=a(Ye,2),yt=l(pt);Oa(yt,{get pFig(){return e.pFig},full:!0}),t(pt);var Gt=a(pt,2),jt=l(Gt);Oa(jt,{get pFig(){return e.pFig},full:!1}),t(Gt),t(xe),le(()=>{la(We,r(v)),It=we(We,1,"svelte-tge7ql",null,It,{colorWarn:r(c)}),lt=we(Wt,1,"svelte-tge7ql",null,lt,{hideColumn:r(n)}),ht=we(Yt,1,"svelte-tge7ql",null,ht,{hideColumn:r(n)}),gt=we(ra,1,"svelte-tge7ql",null,gt,{hideColumn:r(n)}),Z(_t,"size",r(qe)),Z(nt,"src",r(f)),Z(nt,"alt",r(f))}),b("change",Ue,de),b("click",Ie,()=>{y(d,!0)}),b("click",Re,()=>{y(i,!0)}),b("click",Xt,g),b("click",mt,N),dt(_t,()=>r(o),_=>y(o,_)),b("click",st,h),b("click",Vt,Q),b("click",rt,()=>{y(j,!0)}),b("click",Ye,ge),C(s,xe),pe()}Fe(["change","click"]);var ns=M('<nav class="svelte-1m9es65"><button class="svelte-1m9es65">0</button> <button class="svelte-1m9es65">&lt-</button> <button class="svelte-1m9es65">|&lt</button> <button class="svelte-1m9es65">||</button> <button class="svelte-1m9es65">&gt|</button> <button class="svelte-1m9es65">-&gt</button> <input type="range" min="0" class="svelte-1m9es65"/> <input type="number" min="0" class="svelte-1m9es65"/></nav>');function os(s,e){_e(e,!0);let o=Se(e,"tMax",3,10),n=Se(e,"tStep",3,.1),v=Se(e,"tUpdate",3,500),c=Se(e,"simTime",15,0),d=null,i=0,u;const j=4;function m(){d!==null&&(clearInterval(d),d=null)}function S(){u<0&&c()<=0?c(o()):u>0&&c()>=o()?c(0):c(c()+u)}function q(){const Q=v()/2**(Math.abs(i)-1);u=i<0?-n():n(),d=setInterval(S,Q)}function x(){m(),c(0),i=0}function f(){m(),i=0,u=-n(),S()}function X(){m(),i=0,u=n(),S()}function T(){m(),i=Math.max(i-1,-j),q()}function K(){m(),i=Math.min(i+1,j),q()}function A(){m(),i=0}el(()=>{m()});var ee=ns(),oe=l(ee),ve=a(oe,2),de=a(ve,2),h=a(de,2),I=a(h,2),G=a(I,2),E=a(G,2);ne(E);var te=a(E,2);ne(te),t(ee),le(()=>{Z(E,"max",o()),Z(E,"step",n()),Z(te,"max",o()),Z(te,"step",n())}),b("click",oe,x),b("click",ve,T),b("click",de,f),b("click",h,A),b("click",I,X),b("click",G,K),dt(E,c),dt(te,c),C(s,ee),pe()}Fe(["click"]);var cs=M('<nav class="svelte-ahqp2f"><button aria-labelledby="zoomInit" class="svelte-ahqp2f"><div class="zero svelte-ahqp2f"></div></button><button aria-labelledby="zoomIn" class="svelte-ahqp2f"><div class="zoomin svelte-ahqp2f"></div></button><button aria-labelledby="zoomOut" class="svelte-ahqp2f"><div class="zoomout svelte-ahqp2f"></div></button><button aria-labelledby="moveLeft" class="svelte-ahqp2f"><div class="arrowleft svelte-ahqp2f"></div></button><button aria-labelledby="moveRight" class="svelte-ahqp2f"><div class="arrowright svelte-ahqp2f"></div></button><button aria-labelledby="moveUp" class="svelte-ahqp2f"><div class="arrowup svelte-ahqp2f"></div></button><button aria-labelledby="moveDown" class="svelte-ahqp2f"><div class="arrowdown svelte-ahqp2f"></div></button></nav>');function is(s,e){_e(e,!0);var o=cs(),n=l(o),v=a(n),c=a(v),d=a(c),i=a(d),u=a(i),j=a(u);t(o),b("click",n,()=>e.zoomClick("zoomInit")),b("click",v,()=>e.zoomClick("zoomIn")),b("click",c,()=>e.zoomClick("zoomOut")),b("click",d,()=>e.zoomClick("moveLeft")),b("click",i,()=>e.zoomClick("moveRight")),b("click",u,()=>e.zoomClick("moveUp")),b("click",j,()=>e.zoomClick("moveDown")),C(s,o),pe()}Fe(["click"]);var W=kl(()=>D),vs=M('<div class="svelte-7wmyv8"><label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>main part</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>main skeleton</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>second parts</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>second skeletons</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>dynamics</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>ruler</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>frame of reference</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>points</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>lines</label> <label class="svelte-7wmyv8"><input type="checkbox" class="svelte-7wmyv8"/>vectors</label></div>');function ds(s,e){_e(e,!1),pl();var o=vs(),n=l(o),v=l(n);ne(v),De(),t(n);var c=a(n,2),d=l(c);ne(d),De(),t(c);var i=a(c,2),u=l(i);ne(u),De(),t(i);var j=a(i,2),m=l(j);ne(m),De(),t(j);var S=a(j,2),q=l(S);ne(q),De(),t(S);var x=a(S,2),f=l(x);ne(f),De(),t(x);var X=a(x,2),T=l(X);ne(T),De(),t(X);var K=a(X,2),A=l(K);ne(A),De(),t(K);var ee=a(K,2),oe=l(ee);ne(oe),De(),t(ee);var ve=a(ee,2),de=l(ve);ne(de),De(),t(ve),t(o),Le(v,()=>W().dLayers.main,h=>W(W().dLayers.main=h)),Le(d,()=>W().dLayers.mainB,h=>W(W().dLayers.mainB=h)),Le(u,()=>W().dLayers.second,h=>W(W().dLayers.second=h)),Le(m,()=>W().dLayers.secondB,h=>W(W().dLayers.secondB=h)),Le(q,()=>W().dLayers.dynamics,h=>W(W().dLayers.dynamics=h)),Le(f,()=>W().dLayers.ruler,h=>W(W().dLayers.ruler=h)),Le(T,()=>W().dLayers.refframe,h=>W(W().dLayers.refframe=h)),Le(A,()=>W().dLayers.points,h=>W(W().dLayers.points=h)),Le(oe,()=>W().dLayers.lines,h=>W(W().dLayers.lines=h)),Le(de,()=>W().dLayers.vectors,h=>W(W().dLayers.vectors=h)),C(s,o),pe()}var us=M('<section class="svelte-n9eekx"><!> <div class="rack svelte-n9eekx"><canvas class="full svelte-n9eekx"></canvas> <!></div> <div class="rack svelte-n9eekx"><canvas class="zoom svelte-n9eekx"></canvas> <!></div></section>');function fs(s,e){_e(e,!0);let o=Se(e,"simTime",15,0);const n=400,v=1200;let c=B(n),d,i,u;function j(g,N){if(d){const O=d.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{u=g.getAdjustFull(O.canvas.width,O.canvas.height),g.draw(O,u,N)}catch(Y){console.log(Y)}}}function m(g,N,O){if(i){const Y=i.getContext("2d");Y.clearRect(0,0,Y.canvas.width,Y.canvas.height);try{(N===void 0||N.init===0)&&(N=g.getAdjustZoom(Y.canvas.width,Y.canvas.height)),g.draw(Y,N,O)}catch(qe){console.log(qe)}}}function S(){const g=d.getContext("2d"),N=i.getContext("2d"),O=Math.min(Math.max(.4*r(c),n),v);g.canvas.width=O,g.canvas.height=O,N.canvas.width=O,N.canvas.height=O,D.canvasZWidth=O,D.zAdjust.init===0&&(D.zAdjust=e.pFig.getAdjustZoom(N.canvas.width,N.canvas.height))}function q(){S(),j(e.pFig,D.dLayers),m(e.pFig,D.zAdjust,D.dLayers)}function x(g,N,O){j(g,O),m(g,N,O)}tl(()=>{S()}),pa(()=>{x(e.pFig,D.zAdjust,D.dLayers)});function f(g){const N=i.getContext("2d");switch(g){case"zoomInit":D.zAdjust=e.pFig.getAdjustZoom(N.canvas.width,N.canvas.height);break;case"zoomIn":D.zAdjust=ta(.7,D.zAdjust);break;case"zoomOut":D.zAdjust=ta(1.3,D.zAdjust);break;case"moveLeft":D.zAdjust.xMin+=-.2*D.zAdjust.xyDiff;break;case"moveRight":D.zAdjust.xMin+=.2*D.zAdjust.xyDiff;break;case"moveUp":D.zAdjust.yMin+=.2*D.zAdjust.xyDiff;break;case"moveDown":D.zAdjust.yMin+=-.2*D.zAdjust.xyDiff;break;default:console.log(`ERR423: ${g} has no case!`)}m(e.pFig,D.zAdjust,D.dLayers)}const X=3e3,T=10,K=3;let A={timestamp:0,offsetX:0,offsetY:0};function ee(g){g.button===0&&(A.timestamp=Date.now(),A.offsetX=g.offsetX,A.offsetY=g.offsetY)}function oe(g){if(g.button===0)if(Date.now()-A.timestamp<X){const N=Math.abs(A.offsetX-g.offsetX),O=Math.abs(A.offsetY-g.offsetY);if(N<T&&O<T){const[Y,qe]=Qe(g.offsetX,g.offsetY,u);D.zAdjust=ol(Y,qe,D.zAdjust),x(e.pFig,D.zAdjust,D.dLayers)}if(N>T&&O>T){const Y=N/O,qe=1/Y;if(Y<K&&qe<K){const[xe,Te]=Qe(g.offsetX,g.offsetY,u),[Ue,Ie]=Qe(A.offsetX,A.offsetY,u),Ae=i.getContext("2d").canvas.width;D.zAdjust=cl(xe,Te,Ue,Ie,Ae,Ae),x(e.pFig,D.zAdjust,D.dLayers)}}}else console.log(`Warn205: ignore ${g.offsetX} ${g.offsetY} because too slow`)}function ve(g){if(d){const N=d.getContext("2d");if(g.buttons===1){const O=g.offsetX-A.offsetX,Y=g.offsetY-A.offsetY;j(e.pFig,D.dLayers),N.beginPath(),N.rect(A.offsetX,A.offsetY,O,Y),N.strokeStyle=da.mouse,N.stroke()}if(D.dLayers.ruler){const[O,Y]=Qe(g.offsetX,g.offsetY,u);N.clearRect(5,5,200,25),N.font="15px Arial",N.fillStyle=da.ruler,N.fillText(`x: ${O.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}}let de,h,I;function G(g){if(g.button===0){const[N,O]=Qe(g.offsetX,g.offsetY,D.zAdjust);de=N,h=O,I=il(D.zAdjust)}}function E(g){if(g.buttons===1){const[N,O]=Qe(g.offsetX,g.offsetY,I);D.zAdjust=vl(de,h,N,O,I),m(e.pFig,D.zAdjust,D.dLayers)}else if(D.dLayers.ruler&&i){const N=i.getContext("2d"),[O,Y]=Qe(g.offsetX,g.offsetY,D.zAdjust);N.clearRect(5,5,200,25),N.font="15px Arial",N.fillStyle=da.ruler,N.fillText(`x: ${O.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}function te(g){g.preventDefault(),g.deltaY>0?D.zAdjust=ta(.7,D.zAdjust):D.zAdjust=ta(1.3,D.zAdjust),m(e.pFig,D.zAdjust,D.dLayers)}var Q=us();ka("resize",al,q);var fe=l(Q);ds(fe,{});var re=a(fe,2),H=l(re);Z(H,"width",n),Z(H,"height",n),sa(H,g=>d=g,()=>d);var ge=a(H,2);os(ge,{get tMax(){return e.pDefSim.tMax},get tStep(){return e.pDefSim.tStep},get tUpdate(){return e.pDefSim.tUpdate},get simTime(){return o()},set simTime(g){o(g)}}),t(re);var ce=a(re,2),me=l(ce);Z(me,"width",n),Z(me,"height",n),sa(me,g=>i=g,()=>i);var Me=a(me,2);is(Me,{zoomClick:f}),t(ce),t(Q),xl("innerWidth",g=>y(c,g,!0)),b("mousedown",H,ee),b("mouseup",H,oe),b("mousemove",H,ve),b("mousedown",me,G),b("mousemove",me,E),ka("wheel",me,te),C(s,Q),pe()}Fe(["mousedown","mouseup","mousemove"]);var ms=M("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),hs=M('<li class="svelte-1hmhhmr"><input type="checkbox" class="toggle svelte-1hmhhmr"/> <label class="label svelte-1hmhhmr"><div class="arrow svelte-1hmhhmr"></div> </label> <button class="svelte-1hmhhmr"> </button> <button class="svelte-1hmhhmr">Export parameters</button> <div class="nested svelte-1hmhhmr"><article class="svelte-1hmhhmr"> <strong> </strong> </article> <table class="svelte-1hmhhmr"><thead class="svelte-1hmhhmr"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-1hmhhmr"></tbody></table></div></li>'),gs=M('<section class="svelte-1hmhhmr"><h2 class="svelte-1hmhhmr">Sub-designs <span class="svelte-1hmhhmr"> </span></h2> <ol class="svelte-1hmhhmr"></ol></section>');function bs(s,e){_e(e,!0);const o=je(()=>Object.keys(e.subD));async function n(x){const f=e.subD[x];Ua(f.partName,La(f.dparam),!0);const X=ul(`/${e.pLink[f.partName]}`);Va(X)}function v(x){const f=e.subD[x].partName,X=e.subD[x].dparam,T=`sub-design parameters of ${f} from ${e.origPartName}`;ja(f,La(X),T)}function c(x){let f="[ ";return f+=`${vt(ua(x[0]))}, `,f+=`${vt(ua(x[1]))}, `,f+=`${vt(ua(x[2]))} ]`,f}function d(x){let f="[ ";return f+=`${vt(x[0])}, `,f+=`${vt(x[1])}, `,f+=`${vt(x[2])} ]`,f}function i(x){return x?"Yes":""}var u=gs(),j=l(u),m=a(l(j)),S=l(m);t(m),t(j);var q=a(j,2);ze(q,20,()=>r(o),x=>x,(x,f)=>{var X=hs(),T=l(X);ne(T),dl(T,!1);var K=a(T,2),A=a(l(K));t(K);var ee=a(K,2),oe=l(ee);t(ee);var ve=a(ee,2),de=a(ve,2),h=l(de),I=l(h),G=a(I),E=l(G,!0);t(G);var te=a(G);t(h);var Q=a(h,2),fe=a(l(Q));ze(fe,22,()=>Object.keys(e.subD[f].dparam),re=>re,(re,H,ge)=>{var ce=ms();let me;var Me=l(ce),g=l(Me,!0);t(Me);var N=a(Me),O=l(N,!0);t(N);var Y=a(N),qe=l(Y,!0);t(Y);var xe=a(Y),Te=l(xe),Ue=l(Te,!0);t(Te),t(xe);var Ie=a(xe),Re=l(Ie),Ae=l(Re,!0);t(Re),t(Ie),t(ce),le(et=>{me=we(ce,1,"svelte-1hmhhmr",null,me,{changed:e.subD[f].dparam[H].chg}),L(g,r(ge)+1),L(O,H),L(qe,e.subD[f].dparam[H].val),L(Ue,e.subD[f].dparam[H].init),L(Ae,et)},[()=>i(e.subD[f].dparam[H].chg)]),C(re,ce)}),t(fe),t(Q),t(de),t(X),le((re,H,ge)=>{Z(T,"id",`cb_${f??""}`),Z(K,"for",`cb_${f??""}`),L(A,` ${f??""}`),L(oe,`Go to ${e.pLink[e.subD[f].partName]??""}`),L(I,`${re??""} parameters of `),L(E,e.subD[f].partName),L(te,` with orientation ${H??""} (degree) at position
						${ge??""} (mm)`)},[()=>Object.keys(e.subD[f].dparam).length,()=>c(e.subD[f].orientation),()=>d(e.subD[f].position)]),b("click",ee,()=>n(f)),b("click",ve,()=>v(f)),C(x,X)}),t(q),t(u),le(()=>L(S,`(Number of sub-instances: ${r(o).length??""})`)),C(s,u),pe()}Fe(["click"]);var _s=M("<button> </button>"),ps=M('<tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">2d- svg</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr>'),ys=M('<tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">2d- dxf</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr>'),js=M('<!> <section class="svelte-h5jeli"><h2 class="svelte-h5jeli">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-h5jeli"><h2 class="svelte-h5jeli">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-h5jeli"><h2 class="svelte-h5jeli">Export</h2> <table class="svelte-h5jeli"><caption class="svelte-h5jeli">Output files</caption><thead class="svelte-h5jeli"><tr class="svelte-h5jeli"><th class="svelte-h5jeli">#</th><th class="svelte-h5jeli">Filename</th><th class="svelte-h5jeli">Type</th><th class="svelte-h5jeli">Preview</th><th class="svelte-h5jeli">Download</th></tr></thead><tbody class="svelte-h5jeli"><tr class="svelte-h5jeli"><td class="svelte-h5jeli">1</td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">0-params- pxJson</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli">2</td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">1-log- txtLog</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><!><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">2d- svg</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><!><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">2d- dxf</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">4-pax- paxJson</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">5-script- scad</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">5-script- jsCad</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">5-script- pyFreecad</td><td class="svelte-h5jeli"><button class="svelte-h5jeli">preview</button></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr><tr class="svelte-h5jeli"><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli"> </td><td class="svelte-h5jeli">6-zip- zip</td><td class="svelte-h5jeli"></td><td class="svelte-h5jeli"><button class="svelte-h5jeli">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-h5jeli"><textarea readonly="" wrap="soft" class="svelte-h5jeli"></textarea> <button class="bback svelte-h5jeli">close - back - escape</button></dialog> <!></section>',1);function ws(s,e){_e(e,!0);const o="ParametrixAll";function n(w){let P=!0;const R=/warn/i;return w.search(R)<0&&(P=!1),P}function v(w,P){let R=P;if(w.length===0)console.log("warn404: Drawing has an empty face list");else{const k=w.slice();k.push(o),k.includes(R)||(R=w[0])}return R}function c(w,P){let R;const k=Object.keys(w),U=v(k,P);return k.includes(U)?R=w[U]:R=fl(w),R}let d=B(0),i=B(o);Ca(()=>{y(i,v(Object.keys(e.fgeom(0,J[e.pDef.partName]).fig),""),!0)});let u=je(()=>e.fgeom(r(d),J[e.pDef.partName])),j=je(()=>{const w=new Date().toLocaleTimeString();let P=`Geometry ${e.pDef.partName} computed at ${w}
`;return P+=r(u).logstr,P}),m=je(()=>Object.keys(r(u).fig)),S=je(()=>r(u).calcErr),q=je(()=>n(r(u).logstr)),x=je(()=>c(r(u).fig,r(i))),f=je(()=>r(u).sub);function X(w,P){const R=document.createElement("a"),k=URL.createObjectURL(P);R.setAttribute("href",k),R.setAttribute("download",w),R.click(),R.remove(),URL.revokeObjectURL(k)}function T(w,P,R){const k=document.createElement("a"),U="data:"+R+";utf-8,"+encodeURIComponent(P);k.setAttribute("href",U),k.setAttribute("download",w),k.click(),k.remove()}function K(){const w=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(w,"").replace(P,"").replace("T","_")}async function A(w){const P=/^svg_/,R=/^dxf_/;let k=ie.eSVG,U="all";w.match(P)?(k=ie.eSVG,U=w.replace(P,"")):w.match(R)?(k=ie.eDXF,U=w.replace(R,"")):w==="allsvg"?k=ie.eSVGALL:w==="alldxf"?k=ie.eDXFALL:w==="compute_log"?k=ie.eTXTLOG:w==="pax"?k=ie.ePAX:w==="oscad"?k=ie.eOPENSCAD:w==="ojscad"?k=ie.eJSCAD:w==="freecad"?k=ie.eFREECAD:w==="zip"?k=ie.eZIP:console.log(`err883: downloadExport iExportFace ${w} invalid`);const $=hl(k),ue=bl(k),ye=gl(k),se=e.pDef.partName+"_"+U+"_"+K()+$;if(ye){const Oe=await ml(e.fgeom,r(d),J[e.pDef.partName],e.pDef,k);X(se,Oe)}else{const Oe=Sa(e.fgeom,J[e.pDef.partName],e.pDef,U,k);T(se,Oe,ue)}}async function ee(){ja(e.pDef.partName,J[e.pDef.partName],"")}let oe,ve=B("");function de(w){y(ve,w,!0),oe.showModal()}function h(w,P){de(Sa(e.fgeom,J[e.pDef.partName],e.pDef,w,P))}function I(){oe.close()}var G=js(),E=Pe(G);rs(E,{get pDef(){return e.pDef},get pFig(){return r(x)}});var te=a(E,2),Q=a(l(te),2);ha(Q);let fe;t(te);var re=a(te,2),H=l(re),ge=a(l(H));ze(ge,16,()=>r(m),w=>w,(w,P)=>{var R=_s(),k=l(R,!0);t(R),le(()=>{we(R,1,za({theFace:r(i)===P}),"svelte-h5jeli"),L(k,P)}),b("click",R,()=>{y(i,P,!0)}),C(w,R)});var ce=a(ge,2);t(H),t(re);var me=a(re,2);fs(me,{get pDefSim(){return e.pDef.sim},get pFig(){return r(x)},get simTime(){return r(d)},set simTime(w){y(d,w,!0)}});var Me=a(me,2),g=a(l(Me),2),N=a(l(g),2),O=l(N),Y=a(l(O)),qe=l(Y);t(Y);var xe=a(Y,2),Te=l(xe);t(xe);var Ue=a(xe),Ie=l(Ue);t(Ue),t(O);var Re=a(O),Ae=a(l(Re)),et=l(Ae);t(Ae);var We=a(Ae,2),It=l(We);t(We);var tt=a(We),ut=l(tt);t(tt),t(Re);var ft=a(Re);ze(ft,18,()=>r(m),w=>w,(w,P,R)=>{var k=ps(),U=l(k),$=l(U,!0);t(U);var ue=a(U),ye=l(ue);t(ue);var se=a(ue,2),Oe=l(se);t(se);var Ce=a(se),va=l(Ce);t(Ce),t(k),le(()=>{L($,3+r(R)),L(ye,`${e.pDef.partName??""}_${P??""}.svg`)}),b("click",Oe,()=>{h(P,ie.eSVG)}),b("click",va,async()=>{await A(`svg_${P}`)}),C(w,k)});var Ge=a(ft),at=l(Ge),Xt=l(at,!0);t(at);var mt=a(at),Wt=l(mt);t(mt);var lt=a(mt,2),Yt=l(lt);t(lt);var ht=a(lt),ra=l(ht);t(ht),t(Ge);var gt=a(Ge);ze(gt,18,()=>r(m),w=>w,(w,P,R)=>{var k=ys(),U=l(k),$=l(U,!0);t(U);var ue=a(U),ye=l(ue);t(ue);var se=a(ue,2),Oe=l(se);t(se);var Ce=a(se),va=l(Ce);t(Ce),t(k),le(()=>{L($,4+r(m).length+r(R)),L(ye,`${e.pDef.partName??""}_${P??""}.dxf`)}),b("click",Oe,()=>{h(P,ie.eDXF)}),b("click",va,async()=>{await A(`dxf_${P}`)}),C(w,k)});var bt=a(gt),Be=l(bt),_t=l(Be,!0);t(Be);var st=a(Be),Vt=l(st);t(st);var rt=a(st,2),Et=l(rt);t(rt);var Zt=a(rt),Kt=l(Zt);t(Zt),t(bt);var Ye=a(bt),nt=l(Ye),pt=l(nt,!0);t(nt);var yt=a(nt),Gt=l(yt);t(yt);var jt=a(yt,2),_=l(jt);t(jt);var p=a(jt),z=l(p);t(p),t(Ye);var F=a(Ye),ae=l(F),he=l(ae,!0);t(ae);var Ne=a(ae),ot=l(Ne);t(Ne);var ke=a(Ne,2),wt=l(ke);t(ke);var Ve=a(ke),xt=l(Ve);t(Ve),t(F);var be=a(F),He=l(be),Bt=l(He,!0);t(He);var Xe=a(He),V=l(Xe);t(Xe);var kt=a(Xe,2),ct=l(kt);t(kt);var Dt=a(kt),Lt=l(Dt);t(Dt),t(be);var St=a(be),Je=l(St),Nt=l(Je,!0);t(Je);var zt=a(Je),qt=l(zt);t(zt);var At=a(zt,2),na=l(At);t(At);var Ht=a(At),oa=l(Ht);t(Ht),t(St);var Jt=a(St),Ee=l(Jt),Qt=l(Ee,!0);t(Ee);var Ot=a(Ee),it=l(Ot);t(Ot);var Ct=a(Ot,3),ca=l(Ct);t(Ct),t(Jt),t(N),t(g);var Ze=a(g,2),Pt=l(Ze);ha(Pt);var Ft=a(Pt,2);t(Ze),sa(Ze,w=>oe=w,()=>oe);var ia=a(Ze,2);bs(ia,{get subD(){return r(f)},get origPartName(){return e.pDef.partName},get pLink(){return e.pLink}}),t(Me),le(()=>{la(Q,r(j)),fe=we(Q,1,"svelte-h5jeli",null,fe,{colorErr:r(S),colorWarn:r(q)}),we(ce,1,za({theFace:r(i)===o}),"svelte-h5jeli"),L(qe,`px_${e.pDef.partName??""}.json`),L(et,`${e.pDef.partName??""}_all.log`),L(Xt,3+r(m).length),L(Wt,`${e.pDef.partName??""}_all.svg`),L(_t,4+2*r(m).length),L(Vt,`${e.pDef.partName??""}_all.dxf`),L(pt,5+2*r(m).length),L(Gt,`${e.pDef.partName??""}_all.pax.json`),L(he,6+2*r(m).length),L(ot,`${e.pDef.partName??""}_all_noarc_openscad.scad`),L(Bt,7+2*r(m).length),L(V,`${e.pDef.partName??""}_all_noarc_jscad.js`),L(Nt,8+2*r(m).length),L(qt,`${e.pDef.partName??""}_all_freecad.py`),L(Qt,9+2*r(m).length),L(it,`${e.pDef.partName??""}_all.zip`),la(Pt,r(ve))}),b("click",ce,()=>{y(i,o)}),b("click",Te,()=>{de(Vl(e.pDef.partName,J[e.pDef.partName],""))}),b("click",Ie,ee),b("click",It,()=>{h("all",ie.eTXTLOG)}),b("click",ut,async()=>{await A("compute_log")}),b("click",Yt,()=>{h("all",ie.eSVGALL)}),b("click",ra,async()=>{await A("allsvg")}),b("click",Et,()=>{h("all",ie.eDXFALL)}),b("click",Kt,async()=>{await A("alldxf")}),b("click",_,()=>{h("all",ie.ePAX)}),b("click",z,async()=>{await A("pax")}),b("click",wt,()=>{h("all",ie.eOPENSCAD)}),b("click",xt,async()=>{await A("oscad")}),b("click",ct,()=>{h("all",ie.eJSCAD)}),b("click",Lt,async()=>{await A("ojscad")}),b("click",na,()=>{h("all",ie.eFREECAD)}),b("click",oa,async()=>{await A("freecad")}),b("click",ca,async()=>{await A("zip")}),b("click",Ft,I),C(s,G),pe()}Fe(["click"]);var xs=M('<h1 class="svelte-1q35fx9"> </h1> <article class="svelte-1q35fx9"> </article> <!> <!>',1);function ks(s,e){_e(e,!0),Sl(e.pageDef);var o=xs(),n=Pe(o),v=l(n,!0);t(n);var c=a(n,2),d=l(c);t(c);var i=a(c,2);Al(i,{get pDef(){return e.pageDef.pDef}});var u=a(i,2);ws(u,{get pDef(){return e.pageDef.pDef},get fgeom(){return e.pageDef.pGeom},get pLink(){return e.pLink}}),le(()=>{L(v,e.pageDef.pTitle),L(d,`[${e.pageDef.pDef.partName??""}]: ${e.pageDef.pDescription??""}`)}),C(s,o),pe()}function Ms(s,e){_e(e,!0),ks(s,{get pageDef(){return e.data.pageDef},get pLink(){return e.data.allLink}}),pe()}export{Ms as component,Fs as universal};
